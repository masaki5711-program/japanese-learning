<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>私生活日本語学習 - Daily Life Japanese Learning for Indonesians</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            padding: 10px;
            margin: 0;
        }

        @media (min-width: 768px) {
            body {
                padding: 20px;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .home-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-50%) scale(1.05);
        }

        .header h1 {
            font-size: 1.8em;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .header p {
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.3;
        }

        @media (min-width: 768px) {
            .header {
                padding: 30px;
            }

            .header h1 {
                font-size: 2.5em;
                margin-bottom: 10px;
            }

            .header p {
                font-size: 1.2em;
            }
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            flex: 1;
            min-width: 120px;
            padding: 12px 8px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
            white-space: nowrap;
        }

        @media (min-width: 768px) {
            .tab {
                padding: 15px 20px;
                font-size: 16px;
                min-width: auto;
            }
        }

        .tab.active {
            background: white;
            color: #6c5ce7;
            border-bottom: 3px solid #6c5ce7;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .content {
            padding: 15px;
        }

        @media (min-width: 768px) {
            .content {
                padding: 30px;
            }
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .search-container {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        @media (min-width: 768px) {
            .search-container {
                margin-bottom: 30px;
                gap: 15px;
            }

            .search-input {
                min-width: 250px;
                padding: 12px 20px;
                font-size: 16px;
            }
        }

        .search-input:focus {
            outline: none;
            border-color: #6c5ce7;
        }

        .category-filter {
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            background: white;
        }

        @media (min-width: 768px) {
            .category-filter {
                padding: 12px 20px;
                font-size: 16px;
            }
        }

        .word-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (min-width: 480px) {
            .word-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            }
        }

        @media (min-width: 768px) {
            .word-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                margin-bottom: 30px;
            }
        }

        .word-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .word-card {
                padding: 20px;
            }
        }

        .word-card:hover {
            border-color: #6c5ce7;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.1);
        }

        .word-japanese {
            font-size: 20px;
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 4px;
        }

        .word-hiragana {
            font-size: 16px;
            color: #636e72;
            margin-bottom: 8px;
        }

        .word-indonesian {
            font-size: 18px;
            color: #e17055;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .word-romaji {
            font-size: 14px;
            color: #95a5a6;
            font-style: italic;
        }

        @media (min-width: 768px) {
            .word-japanese {
                font-size: 24px;
                margin-bottom: 5px;
            }

            .word-hiragana {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .word-indonesian {
                font-size: 20px;
                margin-bottom: 5px;
            }

            .word-romaji {
                font-size: 16px;
            }
        }

        .word-category {
            display: inline-block;
            background: #6c5ce7;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            margin-top: 10px;
        }

        .button-row {
            display: flex;
            gap: 6px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .example-btn {
            background: #e17055;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 0;
        }

        @media (min-width: 768px) {
            .button-row {
                gap: 8px;
                margin-top: 15px;
            }

            .example-btn {
                padding: 6px 12px;
                font-size: 12px;
                flex: initial;
            }
        }

        .example-btn:hover {
            background: #d63031;
        }

        .word-example {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 12px;
            margin-top: 10px;
            display: none;
            font-size: 14px;
            line-height: 1.4;
        }

        .word-example.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .example-japanese {
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 4px;
        }

        .example-romaji {
            color: #95a5a6;
            font-size: 13px;
            font-style: italic;
            margin-top: 4px;
        }

        .example-indonesian {
            color: #e17055;
            font-weight: bold;
        }

        .category-bilingual {
            font-size: 11px;
            line-height: 1.2;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        .pronunciation-btn {
            background: #00b894;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 0;
        }

        @media (min-width: 768px) {
            .pronunciation-btn {
                padding: 6px 12px;
                font-size: 12px;
                flex: initial;
                margin-left: 10px;
            }
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .stats-container {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }
        }

        .stat-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: #6c5ce7;
        }

        .stat-label {
            font-size: 14px;
            color: #636e72;
            margin-top: 5px;
        }

        .quiz-category-selection {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .category-checkboxes {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        @media (min-width: 480px) {
            .category-checkboxes {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }
        }

        @media (min-width: 768px) {
            .category-checkboxes {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        .category-checkbox {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .category-checkbox:hover {
            background: #e9ecef;
        }

        .category-checkbox input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .category-checkbox label {
            cursor: pointer;
            font-size: 14px;
            line-height: 1.3;
            flex: 1;
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .select-all-btn {
            background: #00cec9;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .select-all-btn:hover {
            background: #00b894;
        }

        .quiz-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
        }

        .quiz-score {
            font-size: 20px;
            margin: 20px 0;
            color: #2d3436;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .quiz-option {
            padding: 15px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .quiz-option:hover {
            border-color: #6c5ce7;
            background: #f0f4ff;
        }

        .quiz-option.correct {
            background: #d4edda;
            border-color: #00b894;
            color: #155724;
        }

        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #e17055;
            color: #721c24;
        }

        .quiz-question-bilingual {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-question-japanese {
            font-size: 22px;
            color: #2d3436;
            margin-bottom: 6px;
            line-height: 1.3;
        }

        .quiz-question-indonesian {
            font-size: 18px;
            color: #636e72;
            font-style: italic;
            line-height: 1.3;
        }

        .quiz-question-romaji {
            font-size: 14px;
            color: #95a5a6;
            margin-top: 4px;
            font-style: italic;
        }

        @media (min-width: 768px) {
            .quiz-question-japanese {
                font-size: 28px;
                margin-bottom: 8px;
            }

            .quiz-question-indonesian {
                font-size: 20px;
            }

            .quiz-question-romaji {
                font-size: 16px;
                margin-top: 5px;
            }
        }

        .btn {
            background: #6c5ce7;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #5a4fcf;
            transform: translateY(-2px);
        }

        .example-container {
            background: #e8f4f8;
            border-left: 4px solid #00cec9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .example-title {
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 10px;
        }

        .example-sentence {
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="home-button">🏠 ホーム</a>
            <h1>🏠 私生活日本語学習</h1>
            <p>Belajar Bahasa Jepang Sehari-hari - Daily Life Japanese Learning</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('dictionary')">📚 辞書 (Kamus)</button>
            <button class="tab" onclick="showTab('quiz')">🎯 クイズ (Kuis)</button>
            <button class="tab" onclick="showTab('examples')">💡 例文 (Contoh)</button>
            <button class="tab" onclick="showTab('practice')">🗣️ 練習 (Latihan)</button>
        </div>

        <div class="content">
            <!-- Dictionary Tab -->
            <div id="dictionary" class="tab-content active">
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-number" id="totalWords">180</div>
                        <div class="stat-label">総単語数 (Total Kata)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="categoriesCount">12</div>
                        <div class="stat-label">カテゴリ数 (Kategori)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="learnedWords">0</div>
                        <div class="stat-label">学習済み (Dipelajari)</div>
                    </div>
                </div>

                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="単語を検索... (Cari kata...)">
                    <select class="category-filter" id="categoryFilter">
                        <option value="">すべてのカテゴリ (Semua Kategori)</option>
                        <option value="挨拶・基本表現">挨拶・基本表現 (Salam & Ungkapan Dasar)</option>
                        <option value="家族・人間関係">家族・人間関係 (Keluarga & Hubungan)</option>
                        <option value="食事・料理">食事・料理 (Makanan & Masak)</option>
                        <option value="買い物">買い物 (Berbelanja)</option>
                        <option value="交通・移動">交通・移動 (Transportasi)</option>
                        <option value="時間・日付">時間・日付 (Waktu & Tanggal)</option>
                        <option value="住居・家具">住居・家具 (Rumah & Furnitur)</option>
                        <option value="健康・病気">健康・病気 (Kesehatan)</option>
                        <option value="天気・季節">天気・季節 (Cuaca & Musim)</option>
                        <option value="感情・気持ち">感情・気持ち (Perasaan)</option>
                        <option value="趣味・娯楽">趣味・娯楽 (Hobi & Hiburan)</option>
                        <option value="仕事・学校">仕事・学校 (Kerja & Sekolah)</option>
                    </select>
                </div>

                <div class="word-grid" id="wordGrid">
                    <!-- Words will be populated by JavaScript -->
                </div>
            </div>

            <!-- Quiz Tab -->
            <div id="quiz" class="tab-content">
                <div class="quiz-container">
                    <h2>🎯 日常生活クイズ - Kuis Kehidupan Sehari-hari</h2>

                    <!-- Category Selection -->
                    <div class="quiz-category-selection">
                        <h3>カテゴリを選択してください - Pilih Kategori</h3>
                        <div class="quiz-controls">
                            <button class="select-all-btn" onclick="selectAllCategories()">全て選択 (Pilih Semua)</button>
                            <button class="select-all-btn" onclick="deselectAllCategories()">全て解除 (Hapus Semua)</button>
                        </div>
                        <div class="category-checkboxes" id="categoryCheckboxes">
                            <!-- Checkboxes will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="quiz-score">
                        スコア (Skor): <span id="quizScore">0</span> / <span id="quizTotal">0</span>
                    </div>

                    <div class="quiz-question-bilingual" id="quizQuestionContainer">
                        <div class="quiz-question-japanese" id="quizQuestionJapanese">クイズを開始してください</div>
                        <div class="quiz-question-indonesian" id="quizQuestionIndonesian">Mulai kuis</div>
                        <div class="quiz-question-romaji" id="quizQuestionRomaji">Mulai kuis</div>
                    </div>

                    <div class="quiz-options" id="quizOptions">
                        <!-- Options will be populated by JavaScript -->
                    </div>

                    <div class="quiz-controls">
                        <button class="btn" onclick="startQuiz()">新しいクイズを開始 (Mulai Kuis Baru)</button>
                        <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display:none;">次の問題 (Soal Berikutnya)</button>
                    </div>
                </div>
            </div>

            <!-- Examples Tab -->
            <div id="examples" class="tab-content">
                <h2>💡 日常会話例文 - Contoh Percakapan Sehari-hari</h2>

                <div class="example-container">
                    <div class="example-title">🌅 朝の挨拶 (Salam Pagi)</div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> おはようございます。<br>
                        <strong>ひらがな:</strong> おはようございます。<br>
                        <strong>Indonesia:</strong> Selamat pagi.<br>
                        <strong>Romaji:</strong> ohayou gozaimasu.
                    </div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> 今日はいい天気ですね。<br>
                        <strong>ひらがな:</strong> きょうはいいてんきですね。<br>
                        <strong>Indonesia:</strong> Cuaca hari ini bagus ya.<br>
                        <strong>Romaji:</strong> kyou wa ii tenki desu ne.
                    </div>
                </div>

                <div class="example-container">
                    <div class="example-title">🍽️ 食事 (Makan)</div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> 何を食べたいですか？<br>
                        <strong>ひらがな:</strong> なにをたべたいですか？<br>
                        <strong>Indonesia:</strong> Mau makan apa?<br>
                        <strong>Romaji:</strong> nani wo tabetai desu ka?
                    </div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> いただきます。<br>
                        <strong>ひらがな:</strong> いただきます。<br>
                        <strong>Indonesia:</strong> Selamat makan (ucapan sebelum makan).<br>
                        <strong>Romaji:</strong> itadakimasu.
                    </div>
                </div>

                <div class="example-container">
                    <div class="example-title">🛒 買い物 (Berbelanja)</div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> これはいくらですか？<br>
                        <strong>ひらがな:</strong> これはいくらですか？<br>
                        <strong>Indonesia:</strong> Ini berapa harganya?<br>
                        <strong>Romaji:</strong> kore wa ikura desu ka?
                    </div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> カードで払えますか？<br>
                        <strong>ひらがな:</strong> かーどではらえますか？<br>
                        <strong>Indonesia:</strong> Bisa bayar dengan kartu?<br>
                        <strong>Romaji:</strong> kaado de haraemasu ka?
                    </div>
                </div>

                <div class="example-container">
                    <div class="example-title">🚌 交通 (Transportasi)</div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> 駅はどこですか？<br>
                        <strong>ひらがな:</strong> えきはどこですか？<br>
                        <strong>Indonesia:</strong> Stasiun di mana?<br>
                        <strong>Romaji:</strong> eki wa doko desu ka?
                    </div>
                    <div class="example-sentence">
                        <strong>日本語:</strong> タクシーを呼んでください。<br>
                        <strong>ひらがな:</strong> たくしーをよんでください。<br>
                        <strong>Indonesia:</strong> Tolong panggil taksi.<br>
                        <strong>Romaji:</strong> takushii wo yonde kudasai.
                    </div>
                </div>
            </div>

            <!-- Practice Tab -->
            <div id="practice" class="tab-content">
                <h2>🗣️ 発音練習 - Latihan Pelafalan</h2>
                <p>選択した単語をクリックして発音を練習しましょう (Klik kata yang dipilih untuk berlatih pelafalan)</p>

                <div class="search-container">
                    <select class="category-filter" id="practiceCategory">
                        <option value="挨拶・基本表現">挨拶・基本表現 (Salam & Ungkapan)</option>
                        <option value="家族・人間関係">家族・人間関係 (Keluarga)</option>
                        <option value="食事・料理">食事・料理 (Makanan)</option>
                        <option value="買い物">買い物 (Berbelanja)</option>
                    </select>
                    <button class="btn" onclick="loadPracticeWords()">練習単語を読み込み (Muat Kata Latihan)</button>
                </div>

                <div class="word-grid" id="practiceGrid">
                    <!-- Practice words will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Complete Dictionary data for daily life - All 180 words
        const dictionary = [
            // 挨拶・基本表現
            {category: "挨拶・基本表現", japanese: "おはよう", hiragana: "おはよう", indonesian: "Selamat pagi (kasual)", romaji: "ohayou"},
            {category: "挨拶・基本表現", japanese: "おはようございます", hiragana: "おはようございます", indonesian: "Selamat pagi (sopan)", romaji: "ohayou gozaimasu"},
            {category: "挨拶・基本表現", japanese: "こんにちは", hiragana: "こんにちは", indonesian: "Selamat siang", romaji: "konnichiwa"},
            {category: "挨拶・基本表現", japanese: "こんばんは", hiragana: "こんばんは", indonesian: "Selamat malam", romaji: "konbanwa"},
            {category: "挨拶・基本表現", japanese: "さようなら", hiragana: "さようなら", indonesian: "Selamat tinggal", romaji: "sayounara"},
            {category: "挨拶・基本表現", japanese: "ありがとう", hiragana: "ありがとう", indonesian: "Terima kasih (kasual)", romaji: "arigatou"},
            {category: "挨拶・基本表現", japanese: "ありがとうございます", hiragana: "ありがとうございます", indonesian: "Terima kasih (sopan)", romaji: "arigatou gozaimasu"},
            {category: "挨拶・基本表現", japanese: "すみません", hiragana: "すみません", indonesian: "Maaf/Permisi", romaji: "sumimasen"},
            {category: "挨拶・基本表現", japanese: "ごめんなさい", hiragana: "ごめんなさい", indonesian: "Maaf", romaji: "gomen nasai"},
            {category: "挨拶・基本表現", japanese: "はい", hiragana: "はい", indonesian: "Ya", romaji: "hai"},
            {category: "挨拶・基本表現", japanese: "いいえ", hiragana: "いいえ", indonesian: "Tidak", romaji: "iie"},
            {category: "挨拶・基本表現", japanese: "お疲れ様", hiragana: "おつかれさま", indonesian: "Terima kasih atas kerja kerasnya", romaji: "otsukaresama"},

            // 家族・人間関係
            {category: "家族・人間関係", japanese: "家族", hiragana: "かぞく", indonesian: "Keluarga", romaji: "kazoku"},
            {category: "家族・人間関係", japanese: "両親", hiragana: "りょうしん", indonesian: "Orang tua", romaji: "ryoushin"},
            {category: "家族・人間関係", japanese: "お父さん", hiragana: "おとうさん", indonesian: "Ayah", romaji: "otousan"},
            {category: "家族・人間関係", japanese: "お母さん", hiragana: "おかあさん", indonesian: "Ibu", romaji: "okaasan"},
            {category: "家族・人間関係", japanese: "兄", hiragana: "あに", indonesian: "Kakak laki-laki", romaji: "ani"},
            {category: "家族・人間関係", japanese: "姉", hiragana: "あね", indonesian: "Kakak perempuan", romaji: "ane"},
            {category: "家族・人間関係", japanese: "弟", hiragana: "おとうと", indonesian: "Adik laki-laki", romaji: "otouto"},
            {category: "家族・人間関係", japanese: "妹", hiragana: "いもうと", indonesian: "Adik perempuan", romaji: "imouto"},
            {category: "家族・人間関係", japanese: "友達", hiragana: "ともだち", indonesian: "Teman", romaji: "tomodachi"},
            {category: "家族・人間関係", japanese: "恋人", hiragana: "こいびと", indonesian: "Kekasih", romaji: "koibito"},
            {category: "家族・人間関係", japanese: "子供", hiragana: "こども", indonesian: "Anak", romaji: "kodomo"},
            {category: "家族・人間関係", japanese: "赤ちゃん", hiragana: "あかちゃん", indonesian: "Bayi", romaji: "akachan"},

            // 食事・料理
            {category: "食事・料理", japanese: "食べ物", hiragana: "たべもの", indonesian: "Makanan", romaji: "tabemono"},
            {category: "食事・料理", japanese: "飲み物", hiragana: "のみもの", indonesian: "Minuman", romaji: "nomimono"},
            {category: "食事・料理", japanese: "ご飯", hiragana: "ごはん", indonesian: "Nasi/Makan", romaji: "gohan"},
            {category: "食事・料理", japanese: "パン", hiragana: "ぱん", indonesian: "Roti", romaji: "pan"},
            {category: "食事・料理", japanese: "麺", hiragana: "めん", indonesian: "Mie", romaji: "men"},
            {category: "食事・料理", japanese: "肉", hiragana: "にく", indonesian: "Daging", romaji: "niku"},
            {category: "食事・料理", japanese: "魚", hiragana: "さかな", indonesian: "Ikan", romaji: "sakana"},
            {category: "食事・料理", japanese: "野菜", hiragana: "やさい", indonesian: "Sayuran", romaji: "yasai"},
            {category: "食事・料理", japanese: "果物", hiragana: "くだもの", indonesian: "Buah-buahan", romaji: "kudamono"},
            {category: "食事・料理", japanese: "水", hiragana: "みず", indonesian: "Air", romaji: "mizu"},
            {category: "食事・料理", japanese: "お茶", hiragana: "おちゃ", indonesian: "Teh", romaji: "ocha"},
            {category: "食事・料理", japanese: "コーヒー", hiragana: "こーひー", indonesian: "Kopi", romaji: "koohii"},
            {category: "食事・料理", japanese: "ビール", hiragana: "びーる", indonesian: "Bir", romaji: "biiru"},
            {category: "食事・料理", japanese: "朝食", hiragana: "ちょうしょく", indonesian: "Sarapan", romaji: "choushoku"},
            {category: "食事・料理", japanese: "昼食", hiragana: "ちゅうしょく", indonesian: "Makan siang", romaji: "chuushoku"},
            {category: "食事・料理", japanese: "夕食", hiragana: "ゆうしょく", indonesian: "Makan malam", romaji: "yuushoku"},

            // 買い物
            {category: "買い物", japanese: "買い物", hiragana: "かいもの", indonesian: "Berbelanja", romaji: "kaimono"},
            {category: "買い物", japanese: "店", hiragana: "みせ", indonesian: "Toko", romaji: "mise"},
            {category: "買い物", japanese: "スーパー", hiragana: "すーぱー", indonesian: "Supermarket", romaji: "suupaa"},
            {category: "買い物", japanese: "デパート", hiragana: "でぱーと", indonesian: "Department Store", romaji: "depaato"},
            {category: "買い物", japanese: "値段", hiragana: "ねだん", indonesian: "Harga", romaji: "nedan"},
            {category: "買い物", japanese: "お金", hiragana: "おかね", indonesian: "Uang", romaji: "okane"},
            {category: "買い物", japanese: "安い", hiragana: "やすい", indonesian: "Murah", romaji: "yasui"},
            {category: "買い物", japanese: "高い", hiragana: "たかい", indonesian: "Mahal", romaji: "takai"},
            {category: "買い物", japanese: "買う", hiragana: "かう", indonesian: "Membeli", romaji: "kau"},
            {category: "買い物", japanese: "売る", hiragana: "うる", indonesian: "Menjual", romaji: "uru"},
            {category: "買い物", japanese: "レジ", hiragana: "れじ", indonesian: "Kasir", romaji: "reji"},
            {category: "買い物", japanese: "袋", hiragana: "ふくろ", indonesian: "Kantong", romaji: "fukuro"},

            // 交通・移動
            {category: "交通・移動", japanese: "交通", hiragana: "こうつう", indonesian: "Transportasi", romaji: "koutsuu"},
            {category: "交通・移動", japanese: "電車", hiragana: "でんしゃ", indonesian: "Kereta", romaji: "densha"},
            {category: "交通・移動", japanese: "バス", hiragana: "ばす", indonesian: "Bus", romaji: "basu"},
            {category: "交通・移動", japanese: "タクシー", hiragana: "たくしー", indonesian: "Taksi", romaji: "takushii"},
            {category: "交通・移動", japanese: "自転車", hiragana: "じてんしゃ", indonesian: "Sepeda", romaji: "jitensha"},
            {category: "交通・移動", japanese: "車", hiragana: "くるま", indonesian: "Mobil", romaji: "kuruma"},
            {category: "交通・移動", japanese: "飛行機", hiragana: "ひこうき", indonesian: "Pesawat", romaji: "hikouki"},
            {category: "交通・移動", japanese: "駅", hiragana: "えき", indonesian: "Stasiun", romaji: "eki"},
            {category: "交通・移動", japanese: "空港", hiragana: "くうこう", indonesian: "Bandara", romaji: "kuukou"},
            {category: "交通・移動", japanese: "道", hiragana: "みち", indonesian: "Jalan", romaji: "michi"},
            {category: "交通・移動", japanese: "歩く", hiragana: "あるく", indonesian: "Berjalan", romaji: "aruku"},
            {category: "交通・移動", japanese: "走る", hiragana: "はしる", indonesian: "Berlari", romaji: "hashiru"},

            // 時間・日付
            {category: "時間・日付", japanese: "時間", hiragana: "じかん", indonesian: "Waktu", romaji: "jikan"},
            {category: "時間・日付", japanese: "今", hiragana: "いま", indonesian: "Sekarang", romaji: "ima"},
            {category: "時間・日付", japanese: "今日", hiragana: "きょう", indonesian: "Hari ini", romaji: "kyou"},
            {category: "時間・日付", japanese: "昨日", hiragana: "きのう", indonesian: "Kemarin", romaji: "kinou"},
            {category: "時間・日付", japanese: "明日", hiragana: "あした", indonesian: "Besok", romaji: "ashita"},
            {category: "時間・日付", japanese: "朝", hiragana: "あさ", indonesian: "Pagi", romaji: "asa"},
            {category: "時間・日付", japanese: "昼", hiragana: "ひる", indonesian: "Siang", romaji: "hiru"},
            {category: "時間・日付", japanese: "夜", hiragana: "よる", indonesian: "Malam", romaji: "yoru"},
            {category: "時間・日付", japanese: "月曜日", hiragana: "げつようび", indonesian: "Senin", romaji: "getsuyoubi"},
            {category: "時間・日付", japanese: "火曜日", hiragana: "かようび", indonesian: "Selasa", romaji: "kayoubi"},
            {category: "時間・日付", japanese: "水曜日", hiragana: "すいようび", indonesian: "Rabu", romaji: "suiyoubi"},
            {category: "時間・日付", japanese: "木曜日", hiragana: "もくようび", indonesian: "Kamis", romaji: "mokuyoubi"},
            {category: "時間・日付", japanese: "金曜日", hiragana: "きんようび", indonesian: "Jumat", romaji: "kinyoubi"},
            {category: "時間・日付", japanese: "土曜日", hiragana: "どようび", indonesian: "Sabtu", romaji: "doyoubi"},
            {category: "時間・日付", japanese: "日曜日", hiragana: "にちようび", indonesian: "Minggu", romaji: "nichiyoubi"},

            // 住居・家具
            {category: "住居・家具", japanese: "家", hiragana: "いえ", indonesian: "Rumah", romaji: "ie"},
            {category: "住居・家具", japanese: "部屋", hiragana: "へや", indonesian: "Kamar", romaji: "heya"},
            {category: "住居・家具", japanese: "台所", hiragana: "だいどころ", indonesian: "Dapur", romaji: "daidokoro"},
            {category: "住居・家具", japanese: "風呂", hiragana: "ふろ", indonesian: "Kamar mandi", romaji: "furo"},
            {category: "住居・家具", japanese: "トイレ", hiragana: "といれ", indonesian: "Toilet", romaji: "toire"},
            {category: "住居・家具", japanese: "寝室", hiragana: "しんしつ", indonesian: "Kamar tidur", romaji: "shinshitsu"},
            {category: "住居・家具", japanese: "ベッド", hiragana: "べっど", indonesian: "Tempat tidur", romaji: "beddo"},
            {category: "住居・家具", japanese: "椅子", hiragana: "いす", indonesian: "Kursi", romaji: "isu"},
            {category: "住居・家具", japanese: "机", hiragana: "つくえ", indonesian: "Meja", romaji: "tsukue"},
            {category: "住居・家具", japanese: "冷蔵庫", hiragana: "れいぞうこ", indonesian: "Kulkas", romaji: "reizouko"},
            {category: "住居・家具", japanese: "テレビ", hiragana: "てれび", indonesian: "TV", romaji: "terebi"},
            {category: "住居・家具", japanese: "エアコン", hiragana: "えあこん", indonesian: "AC", romaji: "eakon"},

            // 健康・病気
            {category: "健康・病気", japanese: "健康", hiragana: "けんこう", indonesian: "Kesehatan", romaji: "kenkou"},
            {category: "健康・病気", japanese: "病気", hiragana: "びょうき", indonesian: "Sakit", romaji: "byouki"},
            {category: "健康・病気", japanese: "風邪", hiragana: "かぜ", indonesian: "Masuk angin", romaji: "kaze"},
            {category: "健康・病気", japanese: "熱", hiragana: "ねつ", indonesian: "Demam", romaji: "netsu"},
            {category: "健康・病気", japanese: "頭痛", hiragana: "ずつう", indonesian: "Sakit kepala", romaji: "zutsuu"},
            {category: "健康・病気", japanese: "腹痛", hiragana: "ふくつう", indonesian: "Sakit perut", romaji: "fukutsuu"},
            {category: "健康・病気", japanese: "病院", hiragana: "びょういん", indonesian: "Rumah sakit", romaji: "byouin"},
            {category: "健康・病気", japanese: "医者", hiragana: "いしゃ", indonesian: "Dokter", romaji: "isha"},
            {category: "健康・病気", japanese: "薬", hiragana: "くすり", indonesian: "Obat", romaji: "kusuri"},
            {category: "健康・病気", japanese: "注射", hiragana: "ちゅうしゃ", indonesian: "Suntik", romaji: "chuusha"},

            // 天気・季節
            {category: "天気・季節", japanese: "天気", hiragana: "てんき", indonesian: "Cuaca", romaji: "tenki"},
            {category: "天気・季節", japanese: "晴れ", hiragana: "はれ", indonesian: "Cerah", romaji: "hare"},
            {category: "天気・季節", japanese: "雨", hiragana: "あめ", indonesian: "Hujan", romaji: "ame"},
            {category: "天気・季節", japanese: "雪", hiragana: "ゆき", indonesian: "Salju", romaji: "yuki"},
            {category: "天気・季節", japanese: "風", hiragana: "かぜ", indonesian: "Angin", romaji: "kaze"},
            {category: "天気・季節", japanese: "暑い", hiragana: "あつい", indonesian: "Panas", romaji: "atsui"},
            {category: "天気・季節", japanese: "寒い", hiragana: "さむい", indonesian: "Dingin", romaji: "samui"},
            {category: "天気・季節", japanese: "春", hiragana: "はる", indonesian: "Musim semi", romaji: "haru"},
            {category: "天気・季節", japanese: "夏", hiragana: "なつ", indonesian: "Musim panas", romaji: "natsu"},
            {category: "天気・季節", japanese: "秋", hiragana: "あき", indonesian: "Musim gugur", romaji: "aki"},
            {category: "天気・季節", japanese: "冬", hiragana: "ふゆ", indonesian: "Musim dingin", romaji: "fuyu"},

            // 感情・気持ち
            {category: "感情・気持ち", japanese: "嬉しい", hiragana: "うれしい", indonesian: "Senang", romaji: "ureshii"},
            {category: "感情・気持ち", japanese: "悲しい", hiragana: "かなしい", indonesian: "Sedih", romaji: "kanashii"},
            {category: "感情・気持ち", japanese: "怒る", hiragana: "おこる", indonesian: "Marah", romaji: "okoru"},
            {category: "感情・気持ち", japanese: "心配", hiragana: "しんぱい", indonesian: "Khawatir", romaji: "shinpai"},
            {category: "感情・気持ち", japanese: "安心", hiragana: "あんしん", indonesian: "Tenang/Lega", romaji: "anshin"},
            {category: "感情・気持ち", japanese: "驚く", hiragana: "おどろく", indonesian: "Terkejut", romaji: "odoroku"},
            {category: "感情・気持ち", japanese: "困る", hiragana: "こまる", indonesian: "Bingung/Kesulitan", romaji: "komaru"},
            {category: "感情・気持ち", japanese: "疲れる", hiragana: "つかれる", indonesian: "Capek", romaji: "tsukareru"},
            {category: "感情・気持ち", japanese: "眠い", hiragana: "ねむい", indonesian: "Mengantuk", romaji: "nemui"},

            // 趣味・娯楽
            {category: "趣味・娯楽", japanese: "趣味", hiragana: "しゅみ", indonesian: "Hobi", romaji: "shumi"},
            {category: "趣味・娯楽", japanese: "音楽", hiragana: "おんがく", indonesian: "Musik", romaji: "ongaku"},
            {category: "趣味・娯楽", japanese: "映画", hiragana: "えいが", indonesian: "Film", romaji: "eiga"},
            {category: "趣味・娯楽", japanese: "本", hiragana: "ほん", indonesian: "Buku", romaji: "hon"},
            {category: "趣味・娯楽", japanese: "ゲーム", hiragana: "げーむ", indonesian: "Game", romaji: "geemu"},
            {category: "趣味・娯楽", japanese: "スポーツ", hiragana: "すぽーつ", indonesian: "Olahraga", romaji: "supootsu"},
            {category: "趣味・娯楽", japanese: "旅行", hiragana: "りょこう", indonesian: "Perjalanan", romaji: "ryokou"},
            {category: "趣味・娯楽", japanese: "写真", hiragana: "しゃしん", indonesian: "Foto", romaji: "shashin"},
            {category: "趣味・娯楽", japanese: "料理", hiragana: "りょうり", indonesian: "Memasak", romaji: "ryouri"},
            {category: "趣味・娯楽", japanese: "読書", hiragana: "どくしょ", indonesian: "Membaca", romaji: "dokusho"},

            // 仕事・学校
            {category: "仕事・学校", japanese: "仕事", hiragana: "しごと", indonesian: "Kerja", romaji: "shigoto"},
            {category: "仕事・学校", japanese: "会社", hiragana: "かいしゃ", indonesian: "Perusahaan", romaji: "kaisha"},
            {category: "仕事・学校", japanese: "学校", hiragana: "がっこう", indonesian: "Sekolah", romaji: "gakkou"},
            {category: "仕事・学校", japanese: "大学", hiragana: "だいがく", indonesian: "Universitas", romaji: "daigaku"},
            {category: "仕事・学校", japanese: "先生", hiragana: "せんせい", indonesian: "Guru", romaji: "sensei"},
            {category: "仕事・学校", japanese: "学生", hiragana: "がくせい", indonesian: "Siswa", romaji: "gakusei"},
            {category: "仕事・学校", japanese: "勉強", hiragana: "べんきょう", indonesian: "Belajar", romaji: "benkyou"},
            {category: "仕事・学校", japanese: "宿題", hiragana: "しゅくだい", indonesian: "PR", romaji: "shukudai"},
            {category: "仕事・学校", japanese: "試験", hiragana: "しけん", indonesian: "Ujian", romaji: "shiken"},
            {category: "仕事・学校", japanese: "休み", hiragana: "やすみ", indonesian: "Libur", romaji: "yasumi"}
        ];

        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let learnedWords = new Set();

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadDictionary();
            setupSearch();
            setupQuizCategories();
            loadVoices();
        });

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function loadDictionary() {
            const wordGrid = document.getElementById('wordGrid');
            wordGrid.innerHTML = '';

            dictionary.forEach(word => {
                const wordCard = createWordCard(word);
                wordGrid.appendChild(wordCard);
            });

            updateStats();
        }

        function createWordCard(word) {
            const card = document.createElement('div');
            card.className = 'word-card';
            card.onclick = () => markAsLearned(word);

            const categoryTranslation = getCategoryTranslation(word.category);
            const exampleId = `example-${word.japanese.replace(/[^\w]/g, '')}-${Math.random().toString(36).substr(2, 9)}`;

            card.innerHTML = `
                <div class="word-japanese">${word.japanese}</div>
                <div class="word-hiragana">${word.hiragana}</div>
                <div class="word-indonesian">${word.indonesian}</div>
                <div class="word-romaji">${word.romaji}</div>
                <div class="word-category category-bilingual">
                    ${word.category}<br><small>${categoryTranslation}</small>
                </div>
                <div class="button-row">
                    <button class="pronunciation-btn" onclick="speakWord('${word.japanese}', event)">🔊 発音 (Pelafalan)</button>
                    <button class="example-btn" onclick="toggleExample('${exampleId}', '${word.japanese}', event)">📝 事例 (Contoh)</button>
                </div>
                <div id="${exampleId}" class="word-example">
                    ${getWordExample(word)}
                </div>
            `;

            return card;
        }

        function getCategoryTranslation(category) {
            const translations = {
                "挨拶・基本表現": "Salam & Ungkapan Dasar",
                "家族・人間関係": "Keluarga & Hubungan",
                "食事・料理": "Makanan & Masak",
                "買い物": "Berbelanja",
                "交通・移動": "Transportasi",
                "時間・日付": "Waktu & Tanggal",
                "住居・家具": "Rumah & Furnitur",
                "健康・病気": "Kesehatan",
                "天気・季節": "Cuaca & Musim",
                "感情・気持ち": "Perasaan",
                "趣味・娯楽": "Hobi & Hiburan",
                "仕事・学校": "Kerja & Sekolah"
            };
            return translations[category] || category;
        }

        function getWordExample(word) {
            const examples = {
                // 挨拶・基本表現
                "おはよう": {
                    japanese: "おはよう！",
                    romaji: "ohayou!",
                    indonesian: "Selamat pagi! (kepada teman)"
                },
                "こんにちは": {
                    japanese: "こんにちは。元気ですか？",
                    romaji: "konnichiwa. genki desu ka?",
                    indonesian: "Selamat siang. Apa kabar?"
                },
                "ありがとう": {
                    japanese: "ありがとうございました。",
                    romaji: "arigatou gozaimashita.",
                    indonesian: "Terima kasih banyak."
                },
                "すみません": {
                    japanese: "すみません、駅はどこですか？",
                    romaji: "sumimasen, eki wa doko desu ka?",
                    indonesian: "Permisi, stasiun di mana?"
                },

                // 家族・人間関係
                "家族": {
                    japanese: "家族と一緒に住んでいます。",
                    romaji: "kazoku to issho ni sunde imasu.",
                    indonesian: "Tinggal bersama keluarga."
                },
                "友達": {
                    japanese: "友達と映画を見ました。",
                    romaji: "tomodachi to eiga wo mimashita.",
                    indonesian: "Nonton film dengan teman."
                },

                // 食事・料理
                "ご飯": {
                    japanese: "ご飯を食べませんか？",
                    romaji: "gohan wo tabemasen ka?",
                    indonesian: "Mau makan tidak?"
                },
                "水": {
                    japanese: "水をください。",
                    romaji: "mizu wo kudasai.",
                    indonesian: "Tolong air."
                },
                "おいしい": {
                    japanese: "とてもおいしいです。",
                    romaji: "totemo oishii desu.",
                    indonesian: "Sangat enak."
                },

                // 買い物
                "買い物": {
                    japanese: "買い物に行きます。",
                    romaji: "kaimono ni ikimasu.",
                    indonesian: "Pergi berbelanja."
                },
                "安い": {
                    japanese: "この店は安いです。",
                    romaji: "kono mise wa yasui desu.",
                    indonesian: "Toko ini murah."
                },

                // 交通・移動
                "電車": {
                    japanese: "電車で会社に行きます。",
                    romaji: "densha de kaisha ni ikimasu.",
                    indonesian: "Pergi ke kantor naik kereta."
                },
                "歩く": {
                    japanese: "駅まで歩きます。",
                    romaji: "eki made arukimasu.",
                    indonesian: "Jalan kaki ke stasiun."
                },

                // 時間・日付
                "今日": {
                    japanese: "今日は暖かいです。",
                    romaji: "kyou wa atatakai desu.",
                    indonesian: "Hari ini hangat."
                },
                "明日": {
                    japanese: "明日は休みです。",
                    romaji: "ashita wa yasumi desu.",
                    indonesian: "Besok libur."
                },

                // 健康・病気
                "風邪": {
                    japanese: "風邪をひきました。",
                    romaji: "kaze wo hikimashita.",
                    indonesian: "Masuk angin."
                },
                "病院": {
                    japanese: "病院に行きます。",
                    romaji: "byouin ni ikimasu.",
                    indonesian: "Pergi ke rumah sakit."
                },

                // 天気・季節
                "晴れ": {
                    japanese: "今日は晴れです。",
                    romaji: "kyou wa hare desu.",
                    indonesian: "Hari ini cerah."
                },
                "暑い": {
                    japanese: "今日は暑いですね。",
                    romaji: "kyou wa atsui desu ne.",
                    indonesian: "Hari ini panas ya."
                },

                // 感情・気持ち
                "嬉しい": {
                    japanese: "とても嬉しいです。",
                    romaji: "totemo ureshii desu.",
                    indonesian: "Sangat senang."
                },
                "疲れる": {
                    japanese: "今日は疲れました。",
                    romaji: "kyou wa tsukaremashita.",
                    indonesian: "Hari ini capek."
                },

                // 趣味・娯楽
                "趣味": {
                    japanese: "趣味は読書です。",
                    romaji: "shumi wa dokusho desu.",
                    indonesian: "Hobi saya membaca."
                },
                "音楽": {
                    japanese: "音楽を聞きます。",
                    romaji: "ongaku wo kikimasu.",
                    indonesian: "Mendengarkan musik."
                },

                // 仕事・学校
                "仕事": {
                    japanese: "仕事は忙しいです。",
                    romaji: "shigoto wa isogashii desu.",
                    indonesian: "Pekerjaan sibuk."
                },
                "勉強": {
                    japanese: "日本語を勉強しています。",
                    romaji: "nihongo wo benkyou shite imasu.",
                    indonesian: "Sedang belajar bahasa Jepang."
                }
            };

            const example = examples[word.japanese];
            if (example) {
                return `
                    <div class="example-japanese">${example.japanese}</div>
                    <div class="example-romaji">${example.romaji}</div>
                    <div class="example-indonesian">${example.indonesian}</div>
                `;
            }

            return `
                <div class="example-japanese">${word.japanese}の使用例</div>
                <div class="example-romaji">${word.romaji} no shiyou rei</div>
                <div class="example-indonesian">Contoh penggunaan ${word.japanese}</div>
            `;
        }

        function toggleExample(exampleId, wordJapanese, event) {
            event.stopPropagation();
            const exampleDiv = document.getElementById(exampleId);
            exampleDiv.classList.toggle('show');
        }

        function markAsLearned(word) {
            learnedWords.add(word.japanese);
            updateStats();
            // Visual feedback
            event.currentTarget.style.background = '#e8f5e8';
            setTimeout(() => {
                event.currentTarget.style.background = '';
            }, 1000);
        }

        function speakWord(text, event) {
            event.stopPropagation();

            if ('speechSynthesis' in window) {
                // Stop any ongoing speech
                speechSynthesis.cancel();

                // Get the word data to access hiragana and romaji
                const wordData = dictionary.find(word => word.japanese === text);

                let textToSpeak = text;
                let pronunciationHint = '';

                if (wordData) {
                    // Use hiragana for more accurate pronunciation
                    textToSpeak = wordData.hiragana;
                    pronunciationHint = `Romaji: ${wordData.romaji}`;

                    // For better pronunciation, add spaces between characters for some problematic words
                    if (text.length > 2) {
                        textToSpeak = wordData.hiragana.split('').join(' ');
                    }
                }

                const utterance = new SpeechSynthesisUtterance(textToSpeak);
                utterance.lang = 'ja-JP';
                utterance.rate = 0.6; // Slower for better clarity
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                // Priority order for Japanese voices
                const voices = speechSynthesis.getVoices();
                const japaneseVoices = voices.filter(voice =>
                    voice.lang.includes('ja') ||
                    voice.name.includes('Japanese') ||
                    voice.name.includes('日本')
                );

                // Try to find the best Japanese voice
                let selectedVoice = null;

                // Prefer native Japanese voices
                selectedVoice = japaneseVoices.find(voice =>
                    voice.name.includes('Kyoko') ||
                    voice.name.includes('Otoya') ||
                    voice.name.includes('Sayaka')
                );

                // Fallback to any Japanese voice
                if (!selectedVoice && japaneseVoices.length > 0) {
                    selectedVoice = japaneseVoices[0];
                }

                if (selectedVoice) {
                    utterance.voice = selectedVoice;
                }

                // Handle errors and provide feedback
                utterance.onerror = function(event) {
                    showSpeechFeedback('音声エラー / Error suara', 'error');
                };

                utterance.onstart = function() {
                    const feedbackText = pronunciationHint ?
                        `🔊 ${text} (${pronunciationHint})` :
                        `🔊 再生中... / Sedang memutar...`;
                    showSpeechFeedback(feedbackText, 'playing');
                };

                utterance.onend = function() {
                    hideSpeechFeedback();
                };

                // Add small delay to ensure voice is loaded
                setTimeout(() => {
                    speechSynthesis.speak(utterance);
                }, 100);

            } else {
                showSpeechFeedback('音声機能がサポートされていません / Fitur suara tidak didukung', 'error');
            }
        }

        function showSpeechFeedback(message, type) {
            // Remove existing feedback
            const existingFeedback = document.getElementById('speechFeedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }

            const feedback = document.createElement('div');
            feedback.id = 'speechFeedback';
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#e17055' : '#00b894'};
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                font-size: 14px;
                z-index: 1000;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease;
            `;

            feedback.textContent = message;
            document.body.appendChild(feedback);

            // Auto-hide after 3 seconds for non-playing messages
            if (type !== 'playing') {
                setTimeout(() => {
                    hideSpeechFeedback();
                }, 3000);
            }
        }

        function hideSpeechFeedback() {
            const feedback = document.getElementById('speechFeedback');
            if (feedback) {
                feedback.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (feedback.parentNode) {
                        feedback.remove();
                    }
                }, 300);
            }
        }

        // Load voices when they become available
        function loadVoices() {
            if ('speechSynthesis' in window) {
                let voices = speechSynthesis.getVoices();

                // Chrome loads voices asynchronously
                if (voices.length === 0) {
                    speechSynthesis.addEventListener('voiceschanged', function() {
                        voices = speechSynthesis.getVoices();
                    });
                }
            }
        }

        function updateStats() {
            document.getElementById('totalWords').textContent = dictionary.length;
            document.getElementById('learnedWords').textContent = learnedWords.size;
        }

        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');

            searchInput.addEventListener('input', filterWords);
            categoryFilter.addEventListener('change', filterWords);
        }

        function filterWords() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedCategory = document.getElementById('categoryFilter').value;

            const filtered = dictionary.filter(word => {
                const matchesSearch = word.japanese.toLowerCase().includes(searchTerm) ||
                                    word.hiragana.toLowerCase().includes(searchTerm) ||
                                    word.indonesian.toLowerCase().includes(searchTerm) ||
                                    word.romaji.toLowerCase().includes(searchTerm);
                const matchesCategory = !selectedCategory || word.category === selectedCategory;

                return matchesSearch && matchesCategory;
            });

            displayFilteredWords(filtered);
        }

        function displayFilteredWords(words) {
            const wordGrid = document.getElementById('wordGrid');
            wordGrid.innerHTML = '';

            words.forEach(word => {
                const wordCard = createWordCard(word);
                wordGrid.appendChild(wordCard);
            });
        }

        function setupQuizCategories() {
            const categories = [...new Set(dictionary.map(word => word.category))];
            const checkboxContainer = document.getElementById('categoryCheckboxes');

            categories.forEach(category => {
                const categoryTranslation = getCategoryTranslation(category);
                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'category-checkbox';

                checkboxDiv.innerHTML = `
                    <input type="checkbox" id="quiz-${category}" value="${category}" checked>
                    <label for="quiz-${category}">
                        ${category}<br>
                        <small>${categoryTranslation}</small>
                    </label>
                `;

                checkboxContainer.appendChild(checkboxDiv);
            });
        }

        function selectAllCategories() {
            document.querySelectorAll('#categoryCheckboxes input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });
        }

        function deselectAllCategories() {
            document.querySelectorAll('#categoryCheckboxes input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        function getSelectedCategories() {
            const selectedCategories = [];
            document.querySelectorAll('#categoryCheckboxes input[type="checkbox"]:checked').forEach(checkbox => {
                selectedCategories.push(checkbox.value);
            });
            return selectedCategories;
        }

        function startQuiz() {
            const selectedCategories = getSelectedCategories();

            if (selectedCategories.length === 0) {
                alert('少なくとも1つのカテゴリを選択してください。\nPilih minimal satu kategori.');
                return;
            }

            // Filter dictionary by selected categories
            const filteredWords = dictionary.filter(word => selectedCategories.includes(word.category));

            if (filteredWords.length === 0) {
                alert('選択されたカテゴリに単語がありません。\nTidak ada kata dalam kategori yang dipilih.');
                return;
            }

            // Get up to 10 words, or all available if less than 10
            const quizLength = Math.min(10, filteredWords.length);
            currentQuiz = filteredWords.sort(() => Math.random() - 0.5).slice(0, quizLength);
            currentQuestionIndex = 0;
            quizScore = 0;

            document.getElementById('quizScore').textContent = quizScore;
            document.getElementById('quizTotal').textContent = currentQuiz.length;

            showNextQuestion();
        }

        function showNextQuestion() {
            if (currentQuestionIndex >= currentQuiz.length) {
                endQuiz();
                return;
            }

            const currentWord = currentQuiz[currentQuestionIndex];
            const options = generateQuizOptions(currentWord);

            // Set trilingual question (Japanese, Indonesian, Romaji)
            document.getElementById('quizQuestionJapanese').textContent =
                `この日本語の意味は？ "${currentWord.japanese}" (${currentWord.hiragana})`;
            document.getElementById('quizQuestionIndonesian').textContent =
                `Apa arti kata Jepang ini? "${currentWord.japanese}" (${currentWord.hiragana})`;
            document.getElementById('quizQuestionRomaji').textContent =
                `Romaji: ${currentWord.romaji}`;

            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';

            options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option';
                button.textContent = option;
                button.onclick = () => checkAnswer(option, currentWord.indonesian, button);
                optionsContainer.appendChild(button);
            });

            document.getElementById('nextBtn').style.display = 'none';
        }

        function generateQuizOptions(correctWord) {
            const options = [correctWord.indonesian];
            // 同じカテゴリの単語を優先的に選択
            const sameCategoryWords = dictionary.filter(w =>
                w.category === correctWord.category && w.indonesian !== correctWord.indonesian
            );
            const otherWords = dictionary.filter(w =>
                w.category !== correctWord.category && w.indonesian !== correctWord.indonesian
            );

            // 同じカテゴリから2つ選択
            while (options.length < 3 && sameCategoryWords.length > 0) {
                const randomIndex = Math.floor(Math.random() * sameCategoryWords.length);
                const randomWord = sameCategoryWords[randomIndex];
                if (!options.includes(randomWord.indonesian)) {
                    options.push(randomWord.indonesian);
                }
                sameCategoryWords.splice(randomIndex, 1);
            }

            // 足りない分は他のカテゴリから選択
            while (options.length < 4 && otherWords.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherWords.length);
                const randomWord = otherWords[randomIndex];
                if (!options.includes(randomWord.indonesian)) {
                    options.push(randomWord.indonesian);
                }
                otherWords.splice(randomIndex, 1);
            }

            return options.sort(() => Math.random() - 0.5);
        }

        function checkAnswer(selectedAnswer, correctAnswer, button) {
            const allOptions = document.querySelectorAll('.quiz-option');
            allOptions.forEach(option => option.onclick = null);

            if (selectedAnswer === correctAnswer) {
                button.classList.add('correct');
                quizScore++;
            } else {
                button.classList.add('incorrect');
                // Highlight correct answer
                allOptions.forEach(option => {
                    if (option.textContent === correctAnswer) {
                        option.classList.add('correct');
                    }
                });
            }

            document.getElementById('quizScore').textContent = quizScore;
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showNextQuestion();
        }

        function endQuiz() {
            const percentage = Math.round((quizScore / currentQuiz.length) * 100);
            let resultMessage = '';
            let resultMessageIndonesian = '';

            if (percentage >= 90) {
                resultMessage = '素晴らしい！完璧です！';
                resultMessageIndonesian = 'Luar biasa! Sempurna!';
            } else if (percentage >= 70) {
                resultMessage = 'よくできました！';
                resultMessageIndonesian = 'Bagus sekali!';
            } else if (percentage >= 50) {
                resultMessage = 'もう少し頑張りましょう。';
                resultMessageIndonesian = 'Perlu sedikit lagi usaha.';
            } else {
                resultMessage = '復習が必要です。';
                resultMessageIndonesian = 'Perlu banyak latihan lagi.';
            }

            document.getElementById('quizQuestionJapanese').textContent =
                `クイズ完了！ スコア: ${quizScore}/${currentQuiz.length} (${percentage}%) ${resultMessage}`;
            document.getElementById('quizQuestionIndonesian').textContent =
                `Kuis selesai! Skor: ${quizScore}/${currentQuiz.length} (${percentage}%) ${resultMessageIndonesian}`;

            document.getElementById('quizOptions').innerHTML = '';
            document.getElementById('nextBtn').style.display = 'none';
        }

        function loadPracticeWords() {
            const category = document.getElementById('practiceCategory').value;
            const practiceWords = dictionary.filter(word => word.category === category);

            const practiceGrid = document.getElementById('practiceGrid');
            practiceGrid.innerHTML = '';

            practiceWords.forEach(word => {
                const card = createWordCard(word);
                practiceGrid.appendChild(card);
            });
        }
    </script>
</body>
</html>